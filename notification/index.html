<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <div class="send" onclick="sendNotification()"></div>
</body>

</html>
<script src="../script/jquery-3.3.1.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.3/firebase-messaging.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        checkPermission();
        initFirebase();
    });
    
    function checkPermission() {
        if (!('Notification' in window)) {
            console.log('This browser does not support notification');
        }
    
        console.log(Notification.permission);
        if (Notification.permission === 'granted') {
            sendNotification();
        } else {
            Notification.requestPermission(function(permission) {
                console.log(Notification.permission);
                if (permission === 'granted') {
                    sendNotification();
                }
            });
        }
    }
    
    var notifyConfig = {
        body: '噗吱福',
        icon: '/images/favicon.ico'
    };
    
    function sendNotification() {
        var notification = new Notification('身在福中', notifyConfig);
    
    }
    
    function initFirebase() {
        var firebaseConfig = {
            apiKey: "AIzaSyAC9W3ylTajaeYqBST42yWUjxHZHzhXd9s",
            authDomain: "learn-firebase-86b18.firebaseapp.com",
            databaseURL: "https://learn-firebase-86b18.firebaseio.com",
            projectId: "learn-firebase-86b18",
            storageBucket: "learn-firebase-86b18.appspot.com",
            messagingSenderId: "623688412760",
            appId: "1:623688412760:web:3a206c5b4d4fa904"
        };
        firebase.initializeApp(firebaseConfig);
    
        var messaging = firebase.messaging();
        messaging.usePublicVapidKey("BJsg3eRGRgrH4gKpi5qtA-4cnOOXdeOc_Kmkzkw5zPqx_-Ei-Mcn2SvgEPXbEh0d_Zo6cEfYkrOpEsVhUTfaXuc");
    }

</script>
